
<!-- Periodic table and drop-down menu scripts -->
<script>

  // Periodic table
  let cells = document.getElementsByTagName("td");
  let activeBlue = 0;
  let activePurple = 0;
 
  window.onload = function() {
    for (let i = 0; i < cells.length; i++) {
      cells[i].onclick = activeColor;
    }
  };

  function activeColor() {
    let color = window.event.target.style.color;
    if (color === '' && activeBlue === 0 && activePurple === 0) {
      window.event.target.style.color = 'blue';
      activeBlue++;
      for (let k = 0; k < elements_x.options.length; k++){
        if (window.event.target.id === elements_x.options[k].value) {
          elements_x.options[k].selected = true;
        }
      }
    } else if (color === '' && activeBlue === 1 && activePurple === 0) {
      window.event.target.style.color = 'purple';
      activePurple++;
      for (let k = 0; k < elements_y.options.length; k++){
        if (window.event.target.id === elements_y.options[k].value) {
          elements_y.options[k].selected = true;
        }
      }
    } else if (color === '' && activeBlue === 0 && activePurple === 1) {
      window.event.target.style.color = 'blue';
      activeBlue++;
      for (let k = 0; k < elements_x.options.length; k++){
        if (window.event.target.id === elements_x.options[k].value) {
          elements_x.options[k].selected = true;
        }
      }
    } else if (color === '' && activeBlue === 1 && activePurple === 1) { // reset
      for (let j = 0; j < cells.length; j++) {
        cells[j].style = '';
      }
      activeBlue--;
      activePurple--;
    } else if (color === 'blue') {
      window.event.target.style.color = '';
      activeBlue--;
    } else if (color === 'purple') {
      window.event.target.style.color = '';
      activePurple--;
    }
  };

  // Update periodic table based on drop-down menu selection
  function updatePeriodicTable_x() {
    let elements_x = document.getElementById("elements_x");
    let x_selectedValue = elements_x.options[elements_x.selectedIndex].value;
    for (let l = 0; l < cells.length; l++){
      if (cells[l].style.color === 'blue') {
        cells[l].style.color = '';
        activeBlue--;
      } else if (x_selectedValue === cells[l].id) {
        console.log('cells[l].id:', cells[l].id);
        cells[l].style.color = 'blue';
        activeBlue++;
      }
    }
  }

  function updatePeriodicTable_y() {
    let elements_y = document.getElementById("elements_y");
    let y_selectedValue = elements_y.options[elements_y.selectedIndex].value;
    for (let l = 0; l < cells.length; l++){
      if (cells[l].style.color === 'purple') {
        cells[l].style.color = '';
        activePurple--;
      } else if (y_selectedValue === cells[l].id) {
        console.log('cells[l].id:', cells[l].id);
        cells[l].style.color = 'purple';
        activePurple++;
      }
    }
  }

  // Drop-down menu
  let elements_x = document.getElementById('elements_x');
  let elements_y = document.getElementById('elements_y');

  function keepSelection() {
    localStorage.setItem("selection_x", elements_x.selectedIndex);
    localStorage.setItem("selection_y", elements_y.selectedIndex);
  };

  elements_x.selectedIndex = localStorage.getItem('selection_x');
  elements_y.selectedIndex = localStorage.getItem('selection_y');
  localStorage.removeItem("selection_x");
  localStorage.removeItem("selection_y");
</script>