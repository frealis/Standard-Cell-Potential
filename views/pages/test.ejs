<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/header.ejs %>

    <title>Battery Webpage - test.ejs</title>
  </head>

  <body>
    <% include ../partials/nav.ejs %>

    <div class="jumbotron text-center">
      <form method="POST" action="/test">
        <div class="row">
          <div class="col-md-3 container">
            Select an element for cell X:
            <select id="selected_x" name="input_x" class="input form-control"> 
              <% include ../partials/elementOptions.ejs %>
            </select>
          </div>
          <div class="col-md-6">
            <!-- <img class="img-fluid" src="battery1.png"> -->
          </div>
          <div class="col-md-3 container">
            Select an element for cell Y:
            <select id="elements_y" name="input_y" class="input form-control"> 
              <% include ../partials/elementOptions.ejs %>

              <script>
                var elements_y = document.getElementById("elements_y");
                function setSelectedIndex_y(s, v) {
                  //localStorage.setItem("elem_y", elements_y.options[elements_y.selectedIndex].text);
                  //localStorage.setItem("elem_y", elements_y.options[2].value);

                  for (var i = 0; i < s.options.length; i++) {
                    //console.log(s.options[i].text);
                    //console.log(v);
                    /*
                    if (s.options[i].text === v) {
                      s.options[i].selected = true;
                      return;
                    }
                    */
                  }
                  //setSelectedIndex_y(elements_y, localStorage.getItem("elem_y"));
                };
                // console.log('elem_y: ', localStorage.getItem("elem_y"));
                // console.log('selected: ', elements_y.options[elements_y.selectedIndex].text);
                // console.log('selected index: ', elements_y.options[elements_y.selectedIndex].index);
                function test() {
                  var x = elements_y.selectedIndex;
                  var y = elements_y.options;
                  alert("Index: " + y[x].index + " is " + y[x].text);
                }
              </script>

            </select>
          </div>
        </div>
        <br>
        <button onclick="test()" type="submit" class="btn btn-success">Submit</button>
      </form>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <h4>Cell X</h4>
          <ul id="ul_x" class="list-group text-left">
           <% include ../partials/cellXData.ejs %>
          </ul>
        </div>
        <div class="col-md-4">
          <h4>Cell Y</h4>
          <ul class="list-group text-left">
           <% include ../partials/cellYData.ejs %>
          </ul>
        </div>
        <div class="col-md-4">
          <h4>Results</h4>
          <ul class="list-group text-left">
            <% include ../partials/cellResults.ejs %>
          </ul>
        </div>
      </div>

      <% include ../partials/footer.ejs %>
  </body>
</html>